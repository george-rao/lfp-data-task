geom_line(data = summary_college_women, color = red)
summary_college_women_by_telework |>
ggplot(aes(x = year, y = mean_income, color = had_telework)) +
geom_line() +
geom_line(data = summary_college_women, color = "red")
summary_college_women_by_telework |>
ggplot(aes(x = year, y = mean_income, color = had_telework)) +
geom_line() +
geom_line(data = summary_college_women)
summary_college_women_by_telework |>
ggplot(aes(x = year, y = mean_income)) +
geom_line(aes(color = had_telework)) +
geom_line(data = summary_college_women)
summary_college_women |>
ggplot(aes(x = year, y = mean_income)) +
geom_line()
summary_college_women_by_telework |>
ggplot(aes(x = year, y = mean_income)) +
geom_line(aes(color = had_telework)) +
geom_line(data = summary_college_women)
summary_college_women_by_telework <- women |>
filter(income != 0, college == "Has college degree") |>
summarize(
.by = c(year, had_telework),
mean_income = mean(income, na.rm = TRUE),
employment_rate = mean(employed_lgl, na.rm = TRUE),
lfp_rate = mean(lfp_lgl, na.rm = TRUE)
) |>
mutate(
had_telework = case_when(
year <= 2019 ~ NA,
year >= 2020 ~ !is.na(had_telework)
)
)
summary_college_women <- women |>
filter(income != 0, college == "Has college degree") |>
summarize(
.by = year,
mean_income = mean(income, na.rm = TRUE),
employment_rate = mean(employed_lgl, na.rm = TRUE),
lfp_rate = mean(lfp_lgl, na.rm = TRUE)
)
summary_college_women_by_telework |>
ggplot(aes(x = year, y = mean_income)) +
geom_line(aes(color = had_telework)) +
geom_line(data = summary_college_women)
summary_college_women_by_telework |>
ggplot(aes(x = year, y = employment_rate)) +
geom_line(aes(color = had_telework)) +
geom_line(data = summary_college_women)
summary_college_women_by_telework |>
ggplot(aes(x = year, y = lfp_rate)) +
geom_line(aes(color = had_telework)) +
geom_line(data = summary_college_women)
quarto_render("PRE_datatask2024.qmd", output_format = "pdf")
quarto::quarto_render("PRE_datatask2024.qmd", output_format = "pdf")
library(quarto)
install.packages("quarto")
quarto_render("PRE_datatask2024.qmd", output_format = "pdf")
library(quarto)
quarto_render("PRE_datatask2024.qmd", output_format = "pdf")
quarto install tinytex
quarto_render("PRE_datatask2024.qmd", output_format = "pdf")
quarto_render("PRE_datatask2024.qmd", output_format = "pdf")
?quarto_render
# Chunk 1
#| message: false
#| warning: false
library(tidyverse)
raw_data <- read_csv("cps_women_lfp.csv")
# Reorder factors
data <- raw_data |>
mutate_if(is_character, as_factor) |>
mutate(
education = fct_relevel(education, "< HS Diploma", "HS Diploma",
"Some college, no degree", "Associate's Degree",
"Bachelor's Degree", "Master's or Higher"),
age = fct_relevel(age, "< 25", "25-34", "35-44", "45-54",
"55-64", "65-74", "75+"),
wageinc_quantiles = fct_relevel(wageinc_quantiles, "0-19.99", "20-39.99",
"40-59.99", "60-79.99", "80-100"),
income_quantiles = fct_relevel(income_quantiles, "0-19.99", "20-39.99",
"40-59.99", "60-79.99", "80-100")
)
# Chunk 2
# Since LFP is the variable of interest, filter out NAs
all <- data |>
filter(!is.na(lfp))
# Create new variables
all <- all |>
mutate(
lfp_lgl = lfp == "In labor force",
college_lgl = college == "Has college degree",
# This logical is true if we know the individual is self-employed,
# but false otherwise, including if there is a missing value
self_employed_lgl = if_else(self_employed == "Self-employed",
TRUE, FALSE, FALSE),
lfp_lgl_excl_self = lfp_lgl & !self_employed_lgl
)
# Create filtered data set of women only
women <- all |>
filter(sex == "Female")
# Create filtered data set of women over 25 only
women_over_25 <- women |>
filter(age != "< 25" & !is.na(age))
# Chunk 3
all |>
summarize(
.by = c(year, sex),
lfp_rate = weighted.mean(lfp_lgl, wgt, na.rm = TRUE)
) |>
ggplot(aes(x = year, y = lfp_rate, color = sex)) +
geom_line()
women |>
summarize(
.by = year,
lfp_rate = mean(lfp_lgl, na.rm = TRUE)
) |>
ggplot(aes(x = year, y = lfp_rate)) +
geom_line()
women_over_25 |>
summarize(
.by = year,
lfp_rate = mean(lfp_lgl, na.rm = TRUE)
) |>
ggplot(aes(x = year, y = lfp_rate)) +
geom_line()
# Chunk 4
women_over_25 |>
summarize(
.by = c(year, race),
lfp_rate = mean(lfp_lgl, na.rm = TRUE)
) |>
ggplot(aes(x = year, y = lfp_rate, color = race)) +
geom_line()
women_over_25 |>
summarize(
.by = c(race),
lfp_rate_1994 = mean(if_else(year == 1994, lfp_lgl, NA), na.rm = TRUE),
lfp_rate_2024 = mean(if_else(year == 2024, lfp_lgl, NA), na.rm = TRUE),
change = lfp_rate_2024 - lfp_rate_1994
)
# Chunk 5
women_over_25 |>
summarize(
.by = c(year, age),
lfp_rate = mean(lfp_lgl, na.rm = TRUE)
) |>
ggplot(aes(x = year, y = lfp_rate, color = age)) +
geom_line()
women_over_25 |>
summarize(
.by = age,
lfp_rate_1994 = mean(if_else(year == 1994, lfp_lgl, NA), na.rm = TRUE),
lfp_rate_2024 = mean(if_else(year == 2024, lfp_lgl, NA), na.rm = TRUE),
change = lfp_rate_2024 - lfp_rate_1994
) |>
arrange(age)
# Chunk 6
women_over_25 |>
summarize(
.by = c(year, income_quantiles),
lfp_rate = mean(lfp_lgl, na.rm = TRUE)
) |>
ggplot(aes(x = year, y = lfp_rate, color = income_quantiles)) +
geom_line()
women_over_25 |>
summarize(
.by = c(income_quantiles),
lfp_rate_1994 = mean(if_else(year == 1994, lfp_lgl, NA), na.rm = TRUE),
lfp_rate_2024 = mean(if_else(year == 2024, lfp_lgl, NA), na.rm = TRUE),
# Since the 2024 data is not yet available, compare with the 2023 rate
lfp_rate_2023 = mean(if_else(year == 2023, lfp_lgl, NA), na.rm = TRUE),
change = lfp_rate_2023 - lfp_rate_1994
)
# Chunk 7
women_over_25 |>
filter(income != 0) |>
summarize(
.by = year,
mean_income = mean(income, na.rm = TRUE)
) |>
ggplot(aes(x = year, y = mean_income)) +
geom_line()
women_over_25 |>
filter(income != 0) |>
summarize(
.by = c(year, race),
mean_income = mean(income, na.rm = TRUE)
) |>
ggplot(aes(x = year, y = mean_income, color = race)) +
geom_line()
women_over_25 |>
filter(income != 0) |>
summarize(
.by = c(year, age),
mean_income = mean(income, na.rm = TRUE)
) |>
ggplot(aes(x = year, y = mean_income, color = age)) +
geom_line()
# Chunk 8
women_over_25 |>
filter(incss != 0) |>
summarize(
.by = year,
mean_incss = mean(incss)
) |>
ggplot(aes(x = year, y = mean_incss)) +
geom_line()
women_over_25 |>
filter(incss != 0) |>
summarize(
.by = c(year, race),
mean_incss = mean(incss)
) |>
filter(!is.na(race)) |>
ggplot(aes(x = year, y = mean_incss, color = race)) +
geom_line()
women_over_25 |>
filter(incss != 0) |>
summarize(
.by = c(year, age),
mean_incss = mean(incss)
) |>
ggplot(aes(x = year, y = mean_incss, color = age)) +
geom_line()
# Chunk 9
women_over_25 |>
summarize(
.by = year,
mean_income = mean(income, na.rm = TRUE),
mean_incss = mean(incss, na.rm = TRUE)
) |>
pivot_longer(
cols = c(mean_income, mean_incss),
names_to = "income_type",
values_to = "income"
) |>
filter(year != 2024) |>
ggplot(aes(x = year, y = income, color = income_type)) +
geom_line()
# Chunk 10
women_over_25 |>
summarize(
.by = year,
college_rate = mean(college_lgl)
) |>
ggplot(aes(x = year, y = college_rate)) +
geom_line()
women_over_25 |>
summarize(
.by = c(year, race),
college_rate = mean(college_lgl)
) |>
ggplot(aes(x = year, y = college_rate, color = race)) +
geom_line()
women_over_25 |>
summarize(
.by = c(year, age),
college_rate = mean(college_lgl)
) |>
ggplot(aes(x = year, y = college_rate, color = age)) +
geom_line()
# Chunk 11
women_lfp_rate_chg <- women |>
summarize(
.by = year,
lfp_rate = mean(lfp_lgl)
) |>
mutate(
lfp_rate_chg = lfp_rate - lag(lfp_rate)
)
women_lfp_rate_chg |>
filter(lfp_rate_chg == max(lfp_rate_chg, na.rm = TRUE))
women_lfp_rate_chg |>
ggplot(aes(x = year, y = lfp_rate_chg)) +
geom_col()
# Chunk 12
women |>
summarize(
.by = c(year, college),
lfp_rate = mean(lfp_lgl)
) |>
ggplot(aes(x = year, y = lfp_rate, color = college)) +
geom_line()
# Chunk 13
women |>
summarize(
.by = c(year, college),
lfp_rate = mean(lfp_lgl),
lfp_rate_excl_self = mean(lfp_lgl_excl_self)
) |>
pivot_longer(
cols = c(lfp_rate, lfp_rate_excl_self),
names_to = "lfp_type",
values_to = "lfp_rate"
) |>
ggplot(aes(x = year, y = lfp_rate, color = college, linetype = lfp_type)) +
geom_line()
# Chunk 14
women |>
summarize(
.by = year,
lfp_rate = mean(lfp_lgl),
lfp_rate_excl_self = mean(lfp_lgl_excl_self)
) |>
pivot_longer(
cols = c(lfp_rate, lfp_rate_excl_self),
names_to = "lfp_type",
values_to = "lfp_rate"
) |>
ggplot(aes(x = year, y = lfp_rate, linetype = lfp_type)) +
geom_line()
women |>
summarize(
.by = c(year, age),
lfp_rate = mean(lfp_lgl),
lfp_rate_excl_self = mean(lfp_lgl_excl_self)
) |>
pivot_longer(
cols = c(lfp_rate, lfp_rate_excl_self),
names_to = "lfp_type",
values_to = "lfp_rate"
) |>
ggplot(aes(x = year, y = lfp_rate, color = age, linetype = lfp_type)) +
geom_line()
women |>
summarize(
.by = c(year, race),
lfp_rate = mean(lfp_lgl),
lfp_rate_excl_self = mean(lfp_lgl_excl_self)
) |>
pivot_longer(
cols = c(lfp_rate, lfp_rate_excl_self),
names_to = "lfp_type",
values_to = "lfp_rate"
) |>
ggplot(aes(x = year, y = lfp_rate, color = race, linetype = lfp_type)) +
geom_line()
women |>
summarize(
.by = c(year, income_quantiles),
lfp_rate = mean(lfp_lgl),
lfp_rate_excl_self = mean(lfp_lgl_excl_self)
) |>
pivot_longer(
cols = c(lfp_rate, lfp_rate_excl_self),
names_to = "lfp_type",
values_to = "lfp_rate"
) |>
ggplot(aes(x = year, y = lfp_rate,
color = income_quantiles, linetype = lfp_type)) +
geom_line()
# Chunk 15
all <- data |>
mutate(
employed_lgl = employed == "Employed",
lfp_lgl = lfp == "In labor force",
covid_telework_lgl =
covid_telework == "Telework from 2021-2022 due to COVID"
) |>
mutate(
.by = cpsidp,
had_telework = any(covid_telework_lgl)
)
women <- all |>
filter(sex == "Female")
women_over_25 <- women |>
filter(age != "< 25")
# Chunk 16
summary_women_by_telework <- women |>
filter(income != 0) |>
summarize(
.by = c(year, had_telework),
mean_income = mean(income, na.rm = TRUE),
employment_rate = mean(employed_lgl, na.rm = TRUE),
lfp_rate = mean(lfp_lgl, na.rm = TRUE)
) |>
mutate(
had_telework = case_when(
year <= 2019 ~ NA,
year >= 2020 ~ !is.na(had_telework)
)
)
summary_women_by_telework |>
ggplot(aes(x = year, y = mean_income, color = had_telework)) +
geom_line()
summary_women_by_telework |>
ggplot(aes(x = year, y = employment_rate, color = had_telework)) +
geom_line()
summary_women_by_telework |>
ggplot(aes(x = year, y = lfp_rate, color = had_telework)) +
geom_line()
# Chunk 17
women_over_25 |>
filter(year == 2021) |>
summarize(
.by = race,
teleworking_rate = mean(covid_telework_lgl, na.rm = TRUE)
) |>
mutate(
race = fct_reorder(race, teleworking_rate)
) |>
ggplot(aes(x = teleworking_rate, y = race)) +
geom_point()
women_over_25 |>
filter(year == 2021) |>
summarize(
.by = age,
teleworking_rate = mean(covid_telework_lgl, na.rm = TRUE)
) |>
ggplot(aes(x = teleworking_rate, y = age)) +
geom_point()
women_over_25 |>
filter(year == 2021) |>
summarize(
.by = education,
teleworking_rate = mean(covid_telework_lgl, na.rm = TRUE)
) |>
ggplot(aes(x = teleworking_rate, y = education)) +
geom_point()
# Chunk 18
summary_college_women_by_telework <- women |>
filter(income != 0, college == "Has college degree") |>
summarize(
.by = c(year, had_telework),
mean_income = mean(income, na.rm = TRUE),
employment_rate = mean(employed_lgl, na.rm = TRUE),
lfp_rate = mean(lfp_lgl, na.rm = TRUE)
) |>
mutate(
had_telework = case_when(
year <= 2019 ~ NA,
year >= 2020 ~ !is.na(had_telework)
)
)
summary_college_women <- women |>
filter(income != 0, college == "Has college degree") |>
summarize(
.by = year,
mean_income = mean(income, na.rm = TRUE),
employment_rate = mean(employed_lgl, na.rm = TRUE),
lfp_rate = mean(lfp_lgl, na.rm = TRUE)
)
summary_college_women_by_telework |>
ggplot(aes(x = year, y = mean_income)) +
geom_line(aes(color = had_telework)) +
geom_line(data = summary_college_women)
summary_college_women_by_telework |>
ggplot(aes(x = year, y = employment_rate)) +
geom_line(aes(color = had_telework)) +
geom_line(data = summary_college_women)
summary_college_women_by_telework |>
ggplot(aes(x = year, y = lfp_rate)) +
geom_line(aes(color = had_telework)) +
geom_line(data = summary_college_women)
all |>
summarize(
.by = c(year, sex),
lfp_rate = weighted.mean(lfp_lgl, wgt, na.rm = TRUE)
) |>
ggplot(aes(x = year, y = lfp_rate, color = sex)) +
geom_line()
women |>
summarize(
.by = year,
lfp_rate = weighted.mean(lfp_lgl, wgt, na.rm = TRUE)
) |>
ggplot(aes(x = year, y = lfp_rate)) +
geom_line()
women_over_25 |>
summarize(
.by = year,
lfp_rate = weighted.mean(lfp_lgl, wgt, na.rm = TRUE)
) |>
ggplot(aes(x = year, y = lfp_rate)) +
geom_line()
all |>
summarize(
.by = c(year, sex),
lfp_rate = weighted.mean(lfp_lgl, wgt, na.rm = TRUE)
) |>
ggplot(aes(x = year, y = lfp_rate, color = sex)) +
geom_line()
women |>
summarize(
.by = year,
lfp_rate = weighted.mean(lfp_lgl, wgt, na.rm = TRUE)
) |>
ggplot(aes(x = year, y = lfp_rate)) +
geom_line()
women_over_25 |>
summarize(
.by = c(year, race),
lfp_rate = mean(lfp_lgl, na.rm = TRUE)
) |>
ggplot(aes(x = year, y = lfp_rate, color = race)) +
geom_line()
women_over_25 |>
summarize(
.by = c(year, age),
lfp_rate = mean(lfp_lgl, na.rm = TRUE)
) |>
ggplot(aes(x = year, y = lfp_rate, color = age)) +
geom_line()
women_over_25 |>
summarize(
.by = c(year, age),
lfp_rate = weighted.mean(lfp_lgl, wgt, na.rm = TRUE)
) |>
ggplot(aes(x = year, y = lfp_rate, color = age)) +
geom_line()
